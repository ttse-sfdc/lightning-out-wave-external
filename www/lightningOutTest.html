<html>
	<script
		src="https://code.jquery.com/jquery-3.2.1.min.js"
		integrity="sha256-hwg4gsxgFZhOsEEamdOYGBf13FyQuiTwlAQgxVSNgt4="
		crossorigin="anonymous"></script>
	<script src="https://externalwavetest.my.salesforce.com/lightning/lightning.out.js"></script>

	<script>
		$.noConflict();

		var url = 'https://externalwavetest.lightning.force.com';
		
		jQuery( document ).ready(function( $ ) {
			var accessToken = location.hash.split("=")[1];
			console.log(accessToken);

		  	jQuery('#accessToken').val(accessToken); 

			jQuery('#loadDb').click(function() {
				console.log("Get DB: " + jQuery('#accessToken').val());
			  	$Lightning.use("wave:waveApp", function() {               
					$Lightning.createComponent("wave:waveDashboard", {                    
					 	dashboardId: "0FKB00000005nruOAA"                
					}, "waveCmp");
	    		}, url, jQuery('#accessToken').val());
			});
		});
	</script>

	<head>
		<meta http-equiv="Content-Language" content="en-us">
		<meta http-equiv="Content-Type" content="text/html;">
		<title>Wave External Test</title>
	</head>
	<body>
		<input id='accessToken' size='150'/>
		<button id='loadDb'>Load DB</button>
		<div id='waveCmp' />
	</body>
</html>